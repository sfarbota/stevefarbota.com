function getTags(){$.getJSON("https://api.stackexchange.com/2.2/users/"+stackOverflowUserId+"/tags?sort=popular&order=desc&pagesize="+tagCount+"&page=1&site=stackoverflow",function(t){var e=[],n=[],r=Number.MAX_VALUE,a=Number.MIN_VALUE;$.each(t.items,function(t,n){e.push(n.name),n.count<r&&(r=n.count),n.count>a&&(a=n.count)}),$.getJSON("https://api.stackexchange.com/2.2/tags/"+e.join(";")+"/wikis?site=stackoverflow",function(t){$.each(t.items,function(t,e){n[e.tag_name]=e.excerpt})}),$.each(t.items,function(t,e){var o="/images/"+e.name+".png";return $.get(o).done(function(){var t=new Image(100,100);t.src=o,t.onload=function(){for(var i=(new ColorThief).getPalette(t,5,10),u=null,c=[0,0,0],s=20,l=0;null===u&&l<i.length;){var f=i[l];Math.abs(f[0]-f[1])<s&&Math.abs(f[0]-f[2])<s&&Math.abs(f[1]-f[2])<s||(u=f),l++}null===u&&(u=c);var h="rgb("+u.join(",")+")";pushBall(r,a,e.count,h,o,e.name,n[e.name])}}).fail(function(){pushBall(r,a,e.count,randomColor({hue:"random",luminosity:"bright",count:1}),null,e.name,n[e.name])}),t>=tagCount-1?!1:void 0}),initDrawing(),setInterval(draw,10)})}function pushBall(t,e,n,r,a,o,i){var u=minFractionOfContainerR*containerR,c=maxFractionOfContainerR*containerR,s=c-u,l=e-t,f=s*(n-t)/l+u;balls.push(getBall(containerR*(Math.random()+.5),containerR*(Math.random()+.5),(Math.random()<.5?-1:1)*speed,(Math.random()<.5?-1:1)*speed,f,r,a,o,i))}function getBall(t,e,n,r,a,o,i,u,c){var s={x:t,y:e,dx:n,dy:r,r:a,color:o,image:i,imageObject:i,title:u,description:c};return s}function initDrawing(){svg.style.width=2*containerR+"px",svg.style.height=2*containerR+"px",svg.style.borderRadius=containerR+"px",svg.style.background="#eee",svg.style.font=textSize+"px Arial"}function draw(){for(var t=0;t<balls.length;t++){var e=balls[t];if(!$("#ball-"+t).filter(function(){return $(this).is(":hover")}).length&&!$("#ball-"+t+"-image").filter(function(){return $(this).is(":hover")}).length&&!$("#ball-"+t+"-text").filter(function(){return $(this).is(":hover")}).length){$("#ball-"+t+"-text").remove(),$("#ball-"+t+"-image").remove(),$("#ball-"+t).remove();var n=document.createElementNS(svgNamespace,"circle");if(n.id="ball-"+t,n.setAttributeNS(null,"cx",e.x),n.setAttributeNS(null,"cy",e.y),n.setAttributeNS(null,"r",e.r),n.setAttributeNS(null,"fill",e.color),n.style.cursor="pointer",null!==e.image){var r=document.createElementNS(svgNamespace,"image");r.id="ball-"+t+"-image",r.setAttributeNS("http://www.w3.org/1999/xlink","href",e.image),r.setAttributeNS(null,"height",1.4*e.r),r.setAttributeNS(null,"width",1.4*e.r),r.setAttributeNS(null,"x",e.x-.7*e.r),r.setAttributeNS(null,"y",e.y-.7*e.r),r.setAttributeNS(null,"visibility","visible"),r.style.cursor="pointer",$("#svg-wrapper").append(n),$("#svg-wrapper").append(r)}else{var a=document.createElementNS(svgNamespace,"text");a.id="ball-"+t+"-text";var o=e.title.toUpperCase().split("-");a.setAttributeNS(null,"x",e.x),a.setAttributeNS(null,"y",e.y),a.setAttributeNS(null,"fill","#000"),a.style.cursor="pointer",$("#svg-wrapper").append(n),$("#svg-wrapper").append(a);for(var i=0;i<o.length;i++){var u=document.createElementNS(svgNamespace,"tspan");u.setAttributeNS(null,"dy",textLineSpacing+"px"),u.textContent=o[i],$("#ball-"+t+"-text").append(u),u.setAttributeNS(null,"x",e.x-u.getComputedTextLength()/2)}a.setAttributeNS(null,"x",e.x-a.getComputedTextLength()/2),a.setAttributeNS(null,"y",e.y-(textSize+(o.length-1)*textLineSpacing)/2)}e.x+=e.dx,e.y+=e.dy;var c=e.x-containerR,s=e.y-containerR,l=Math.sqrt(c*c+s*s);if(l>=containerR-e.r){var f=l,h=c/f,v=s/f,g=-v,p=h,d=-(h*e.dx+v*e.dy),m=g*e.dx+p*e.dy;e.dx=d*h+m*g,e.dy=d*v+m*p}}}}var CanvasImage=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};CanvasImage.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},CanvasImage.prototype.update=function(t){this.context.putImageData(t,0,0)},CanvasImage.prototype.getPixelCount=function(){return this.width*this.height},CanvasImage.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},CanvasImage.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var ColorThief=function(){};if(ColorThief.prototype.getColor=function(t,e){var n=this.getPalette(t,5,e),r=n[0];return r},ColorThief.prototype.getPalette=function(t,e,n){"undefined"==typeof e&&(e=10),("undefined"==typeof n||1>n)&&(n=10);for(var r,a,o,i,u,c=new CanvasImage(t),s=c.getImageData(),l=s.data,f=c.getPixelCount(),h=[],v=0;f>v;v+=n)r=4*v,a=l[r+0],o=l[r+1],i=l[r+2],u=l[r+3],u>=125&&(a>250&&o>250&&i>250||h.push([a,o,i]));var g=MMCQ.quantize(h,e),p=g?g.palette():null;return c.removeCanvas(),p},!pv)var pv={map:function(t,e){var n={};return e?t.map(function(t,r){return n.index=r,e.call(n,t)}):t.slice()},naturalOrder:function(t,e){return e>t?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(t,r,a){return n.index=a,t+e.call(n,r)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?pv.map(t,e):t)}};var MMCQ=function(){function t(t,e,n){return(t<<2*c)+(e<<c)+n}function e(t){function e(){n.sort(t),r=!0}var n=[],r=!1;return{push:function(t){n.push(t),r=!1},peek:function(t){return r||e(),void 0===t&&(t=n.length-1),n[t]},pop:function(){return r||e(),n.pop()},size:function(){return n.length},map:function(t){return n.map(t)},debug:function(){return r||e(),n}}}function n(t,e,n,r,a,o,i){var u=this;u.r1=t,u.r2=e,u.g1=n,u.g2=r,u.b1=a,u.b2=o,u.histo=i}function r(){this.vboxes=new e(function(t,e){return pv.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())})}function a(e){var n,r,a,o,i=1<<3*c,u=new Array(i);return e.forEach(function(e){r=e[0]>>s,a=e[1]>>s,o=e[2]>>s,n=t(r,a,o),u[n]=(u[n]||0)+1}),u}function o(t,e){var r,a,o,i=1e6,u=0,c=1e6,l=0,f=1e6,h=0;return t.forEach(function(t){r=t[0]>>s,a=t[1]>>s,o=t[2]>>s,i>r?i=r:r>u&&(u=r),c>a?c=a:a>l&&(l=a),f>o?f=o:o>h&&(h=o)}),new n(i,u,c,l,f,h,e)}function i(e,n){function r(t){var e,r,a,o,i,u=t+"1",s=t+"2",l=0;for(c=n[u];c<=n[s];c++)if(g[c]>v/2){for(a=n.copy(),o=n.copy(),e=c-n[u],r=n[s]-c,i=r>=e?Math.min(n[s]-1,~~(c+r/2)):Math.max(n[u],~~(c-1-e/2));!g[i];)i++;for(l=p[i];!l&&g[i-1];)l=p[--i];return a[s]=i,o[u]=a[s]+1,[a,o]}}if(n.count()){var a=n.r2-n.r1+1,o=n.g2-n.g1+1,i=n.b2-n.b1+1,u=pv.max([a,o,i]);if(1==n.count())return[n.copy()];var c,s,l,f,h,v=0,g=[],p=[];if(u==a)for(c=n.r1;c<=n.r2;c++){for(f=0,s=n.g1;s<=n.g2;s++)for(l=n.b1;l<=n.b2;l++)h=t(c,s,l),f+=e[h]||0;v+=f,g[c]=v}else if(u==o)for(c=n.g1;c<=n.g2;c++){for(f=0,s=n.r1;s<=n.r2;s++)for(l=n.b1;l<=n.b2;l++)h=t(s,c,l),f+=e[h]||0;v+=f,g[c]=v}else for(c=n.b1;c<=n.b2;c++){for(f=0,s=n.r1;s<=n.r2;s++)for(l=n.g1;l<=n.g2;l++)h=t(s,l,c),f+=e[h]||0;v+=f,g[c]=v}return g.forEach(function(t,e){p[e]=v-t}),r(u==a?"r":u==o?"g":"b")}}function u(t,n){function u(t,e){for(var n,r=1,a=0;l>a;)if(n=t.pop(),n.count()){var o=i(c,n),u=o[0],s=o[1];if(!u)return;if(t.push(u),s&&(t.push(s),r++),r>=e)return;if(a++>l)return}else t.push(n),a++}if(!t.length||2>n||n>256)return!1;var c=a(t),s=0;c.forEach(function(){s++});var h=o(t,c),v=new e(function(t,e){return pv.naturalOrder(t.count(),e.count())});v.push(h),u(v,f*n);for(var g=new e(function(t,e){return pv.naturalOrder(t.count()*t.volume(),e.count()*e.volume())});v.size();)g.push(v.pop());u(g,n-g.size());for(var p=new r;g.size();)p.push(g.pop());return p}var c=5,s=8-c,l=1e3,f=.75;return n.prototype={volume:function(t){var e=this;return(!e._volume||t)&&(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(e){var n=this,r=n.histo;if(!n._count_set||e){var a,o,i,u=0;for(a=n.r1;a<=n.r2;a++)for(o=n.g1;o<=n.g2;o++)for(i=n.b1;i<=n.b2;i++)index=t(a,o,i),u+=r[index]||0;n._count=u,n._count_set=!0}return n._count},copy:function(){var t=this;return new n(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var n=this,r=n.histo;if(!n._avg||e){var a,o,i,u,s,l=0,f=1<<8-c,h=0,v=0,g=0;for(o=n.r1;o<=n.r2;o++)for(i=n.g1;i<=n.g2;i++)for(u=n.b1;u<=n.b2;u++)s=t(o,i,u),a=r[s]||0,l+=a,h+=a*(o+.5)*f,v+=a*(i+.5)*f,g+=a*(u+.5)*f;l?n._avg=[~~(h/l),~~(v/l),~~(g/l)]:n._avg=[~~(f*(n.r1+n.r2+1)/2),~~(f*(n.g1+n.g2+1)/2),~~(f*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var e=this,n=t[0]>>s;return gval=t[1]>>s,bval=t[2]>>s,n>=e.r1&&n<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},r.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,n=0;n<e.size();n++)if(e.peek(n).vbox.contains(t))return e.peek(n).color;return this.nearest(t)},nearest:function(t){for(var e,n,r,a=this.vboxes,o=0;o<a.size();o++)n=Math.sqrt(Math.pow(t[0]-a.peek(o).color[0],2)+Math.pow(t[1]-a.peek(o).color[1],2)+Math.pow(t[2]-a.peek(o).color[2],2)),(e>n||void 0===e)&&(e=n,r=a.peek(o).color);return r},forcebw:function(){var t=this.vboxes;t.sort(function(t,e){return pv.naturalOrder(pv.sum(t.color),pv.sum(e.color))});var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,r=t[n].color;r[0]>251&&r[1]>251&&r[2]>251&&(t[n].color=[255,255,255])}},{quantize:u}}();!function(t,e){if("function"==typeof define&&define.amd)define([],e);else if("object"==typeof exports){var n=e();"object"==typeof module&&module&&module.exports&&(exports=module.exports=n),exports.randomColor=n}else t.randomColor=e()}(this,function(){function t(t){var e=o(t.hue),n=c(e);return 0>n&&(n=360+n),n}function e(t,e){if("random"===e.luminosity)return c([0,100]);if("monochrome"===e.hue)return 0;var n=i(t),r=n[0],a=n[1];switch(e.luminosity){case"bright":r=55;break;case"dark":r=a-10;break;case"light":a=55}return c([r,a])}function n(t,e,n){var r=a(t,e),o=100;switch(n.luminosity){case"dark":o=r+20;break;case"light":r=(o+r)/2;break;case"random":r=0,o=100}return c([r,o])}function r(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return v(t);case"hsl":var n=v(t);return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";case"hsla":var r=v(t);return"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+Math.random()+")";case"rgbArray":return h(t);case"rgb":var a=h(t);return"rgb("+a.join(", ")+")";case"rgba":var o=h(t);return"rgba("+o.join(", ")+", "+Math.random()+")";default:return s(t)}}function a(t,e){for(var n=u(t).lowerBounds,r=0;r<n.length-1;r++){var a=n[r][0],o=n[r][1],i=n[r+1][0],c=n[r+1][1];if(e>=a&&i>=e){var s=(c-o)/(i-a),l=o-s*a;return s*e+l}}return 0}function o(t){if("number"==typeof parseInt(t)){var e=parseInt(t);if(360>e&&e>0)return[e,e]}if("string"==typeof t&&d[t]){var n=d[t];if(n.hueRange)return n.hueRange}return[0,360]}function i(t){return u(t).saturationRange}function u(t){t>=334&&360>=t&&(t-=360);for(var e in d){var n=d[e];if(n.hueRange&&t>=n.hueRange[0]&&t<=n.hueRange[1])return d[e]}return"Color not found"}function c(t){if(null===p)return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]));var e=t[1]||1,n=t[0]||0;p=(9301*p+49297)%233280;var r=p/233280;return Math.floor(n+r*(e-n))}function s(t){function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var n=h(t),r="#"+e(n[0])+e(n[1])+e(n[2]);return r}function l(t,e,n){var r=n[0][0],a=n[n.length-1][0],o=n[n.length-1][1],i=n[0][1];d[t]={hueRange:e,lowerBounds:n,saturationRange:[r,a],brightnessRange:[o,i]}}function f(){l("monochrome",null,[[0,0],[100,0]]),l("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),l("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),l("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),l("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),l("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),l("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),l("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function h(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var n=t[1]/100,r=t[2]/100,a=Math.floor(6*e),o=6*e-a,i=r*(1-n),u=r*(1-o*n),c=r*(1-(1-o)*n),s=256,l=256,f=256;switch(a){case 0:s=r,l=c,f=i;break;case 1:s=u,l=r,f=i;break;case 2:s=i,l=r,f=c;break;case 3:s=i,l=u,f=r;break;case 4:s=c,l=i,f=r;break;case 5:s=r,l=i,f=u}var h=[Math.floor(255*s),Math.floor(255*l),Math.floor(255*f)];return h}function v(t){var e=t[0],n=t[1]/100,r=t[2]/100,a=(2-n)*r;return[e,Math.round(n*r/(1>a?a:2-a)*1e4)/100,a/2*100]}function g(t){for(var e=0,n=0;n!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);n++)e+=t.charCodeAt(n);return e}var p=null,d={};f();var m=function(a){if(a=a||{},a.seed&&a.seed===parseInt(a.seed,10))p=a.seed;else if("string"==typeof a.seed)p=g(a.seed);else{if(void 0!==a.seed&&null!==a.seed)throw new TypeError("The seed value must be an integer");p=null}var o,i,u;if(null!==a.count&&void 0!==a.count){var c=a.count,s=[];for(a.count=null;c>s.length;)p&&a.seed&&(a.seed+=1),s.push(m(a));return a.count=c,s}return o=t(a),i=e(o,a),u=n(o,i,a),r([o,i,u],a)};return m});var stackOverflowUserId=170309,tagCount=6,minContainerR=100,minFractionOfContainerR=.15,maxFractionOfContainerR=.35,speed=.8,container=document.getElementById("current-areas-of-focus-container"),containerRect=container.getBoundingClientRect(),containerParentRect=container.parentElement.getBoundingClientRect(),mainFooterRect=$("#main-footer")[0].getBoundingClientRect(),containerHeight=mainFooterRect.top-containerParentRect.bottom,containerWidth=containerRect.right-containerRect.left;mainContainerR=minContainerR>containerWidth?containerWidth:minContainerR;var containerR=(containerWidth>containerHeight?containerHeight:containerWidth)/2;containerR=minContainerR>containerR?minContainerR:containerR;var textSize=containerR/20,textLineSpacing=containerR/20,svgNamespace="http://www.w3.org/2000/svg",svg=document.createElementNS(svgNamespace,"svg");svg.id="svg-wrapper",$("#current-areas-of-focus-container").append(svg);var balls=[];getTags();